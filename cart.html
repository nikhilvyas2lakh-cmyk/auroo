<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auroo - Search Results</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/media.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    form {
      width: 80vw;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 10px;
    }


    input,
    select,
    textarea {
      width: 85%;
      margin-top: 13px;
      padding: 16px;
      background: #222;
      color: #fff;
      border: 1px solid #333;
      border-radius: 14px;
      font-size: 18px;
    }

    .details-cart {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .cart-btn {
      text-decoration: none;
      margin-left: 12px;
    }

    .logo {
      padding: 0;
    }

    /* Submit button base */
    button[type="submit"] {
      background-color: #4CAF50;
      color: #fff;
      border: none;
      padding: 12px 18px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    /* On click */
    button[type="submit"]:active {
      background-color: #ff9900;
      /* yellow */
      color: #000;
    }
  </style>
</head>

<body>

  <header class="header">
    <nav class="nav-bar">
      <div class="navbar-primery">
        <!-- <img src="imgs\mamaearth-logo.avif" alt="logo-me" width="140px" height="31.5px"> -->
        <a href="index.html">
          <div class="logo exile-regular">
            <span style="color: #ff9900; font-size: 2em; font-weight: 900;">AUR</span>
            <span style="color: #4CAF50; font-size: 2em; font-weight: 900;">OO</span>
          </div>
        </a>

        <form action="search.html" method="GET" class="sec search-box">
          <!-- <input type="text" name="q" class="search-bar" placeholder="Search items..." required />
          <button type="submit" class="search-btn"><i class="fa-solid fa-magnifying-glass"></i>
          </button> -->
        </form>



        <!-- ðŸ›’ -->
        <a href="cart.html" class="cart-link cart-btn">
          <div class="cart-button" disabled>
            <div class="cart-icon"><i class="fa-solid fa-cart-shopping"></i></div>
            <div class="cart-text">My Cart</div>
          </div>
        </a>

        <a href="order.html" class="cart-link cart-btn">
          <div class="cart-button" disabled>
            <div class="cart-icon"><i class="fa-solid fa-truck-ramp-box"></i></div>
            <div class="cart-text">Quick Order</div>
          </div>
        </a>

      </div>

    </nav>
  </header>
  <div class="space" style="margin-top: 80px;"></div>


  <form action="https://api.web3forms.com/submit" method="POST" id="orderForm">

    <!-- REQUIRED -->
    <input type="hidden" name="access_key" value="f199cdff-de04-41ab-8140-2b19688cd56d">

    <!-- CART ITEMS -->
    <h3>Items</h3>
    <ul id="cartList" class="cart-list"></ul>

    <h3>Total: â‚¹<span id="cartTotal">0</span></h3>


    <!-- Hidden field to send cart -->
    <input type="hidden" name="order_items" id="orderItems">


    <!-- USER DETAILS -->
    <h3>Delivery Details</h3>

    <div class="details-cart">
      <div id="detailsSummary" style="display:none; margin-bottom:12px;">
        <h4>Saved Details</h4>
        <ul id="summaryList"></ul>
      </div>

      <button type="button" id="editToggleBtn" class="btn">
        Edit Details
      </button>
    </div>
    <!-- <input type="text" name="Name" placeholder="Your Name" required>
    <input type="tel" name="Mobile Number" placeholder="Mobile Number" required> -->
    <input type="text" name="Name" placeholder="Your Name" required data-save>

    <input type="tel" name="Mobile Number" placeholder="Mobile Number" required data-save>

    <select name="Location Type" required data-save>
      <option value="">Nearby-location</option>
      <option>main bus-stand</option>
      <option>Near parshuram chouk</option>
      <option>Nala ki dhani</option>
      <option>Baajar</option>
      <option>Rohida</option>
      <option>Gurjaro ki dhani</option>
      <option>other</option>
    </select>

    <input type="search" name="Location" placeholder="Full Address / Landmark" required data-save>




    <textarea name="describe" placeholder="Write the Things you don't get on our site"></textarea>

    <button type="submit" class="btn">Submit Order</button>
  </form>

  <ul id="cartList" class="cart-list"></ul>

  <script>
    (function () {
      const SAVE_PREFIX = "auroo_";
      const fields = document.querySelectorAll("[data-save]");
      const summaryBox = document.getElementById("detailsSummary");
      const summaryList = document.getElementById("summaryList");
      const editBtn = document.getElementById("editToggleBtn");
      const form = document.getElementById("orderForm");

      function loadSavedValues() {
        fields.forEach(field => {
          const key = SAVE_PREFIX + field.name;
          const savedValue = localStorage.getItem(key);
          if (savedValue) {
            field.value = savedValue;
          }
        });
      }

      function saveValues() {
        fields.forEach(field => {
          const value = field.value.trim();
          const key = SAVE_PREFIX + field.name;
          if (value !== "") {
            localStorage.setItem(key, value);
          }
        });
      }

      function hasSavedValues() {
        return Array.from(fields).some(field => {
          const key = SAVE_PREFIX + field.name;
          const value = localStorage.getItem(key);
          return value && value.trim() !== "";
        });
      }

      function buildSummary() {
        summaryList.innerHTML = "";
        let hasData = false;

        fields.forEach(field => {
          const key = SAVE_PREFIX + field.name;
          const value = localStorage.getItem(key);

          if (value) {
            hasData = true;
            const li = document.createElement("li");
            li.textContent = `${field.name}: ${value}`;
            summaryList.appendChild(li);
          }
        });

        summaryBox.style.display = hasData ? "block" : "none";
      }

      function lockFields() {
        fields.forEach(field => {
          if (field.tagName === "SELECT") {
            field.style.pointerEvents = "none";
          } else {
            field.setAttribute("readonly", true);
          }
          field.style.opacity = "0.6";
        });
      }

      function unlockFields() {
        fields.forEach(field => {
          field.removeAttribute("readonly");
          field.style.pointerEvents = "auto";
          field.style.opacity = "1";
        });
      }

      function hideFields() {
        fields.forEach(field => {
          field.style.display = "none";
        });
      }

      function showFields() {
        fields.forEach(field => {
          field.style.display = "block";
        });
      }

      function setEditing(isEditing) {
        if (isEditing) {
          showFields();
          unlockFields();
          summaryBox.style.display = "none";
          editBtn.textContent = "Save Details";
        } else {
          lockFields();
          if (hasSavedValues()) {
            hideFields();
            buildSummary();
          } else {
            showFields();
          }
          editBtn.textContent = "Edit Details";
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        loadSavedValues();
        buildSummary();
        setEditing(!hasSavedValues());
      });

      editBtn.addEventListener("click", () => {
        if (editBtn.textContent === "Save Details") {
          saveValues();
          setEditing(false);
        } else {
          setEditing(true);
        }
      });

      form.addEventListener("submit", () => {
        saveValues();
        setEditing(false);
      });
    })();
  </script>


  <!-- 
  <script>
    const addressInput = document.getElementById("addressInput");
    const savedBox = document.getElementById("savedAddressBox");
    const savedText = document.getElementById("savedAddressText");
    const changeBtn = document.getElementById("changeAddressBtn");

    const SAVED_ADDRESS_KEY = "auroo_saved_address";

    // On page load
    window.addEventListener("DOMContentLoaded", () => {
      const savedAddress = localStorage.getItem(SAVED_ADDRESS_KEY);

      if (savedAddress) {
        savedText.textContent = savedAddress;
        addressInput.value = savedAddress;

        addressInput.style.display = "none";
        savedBox.style.display = "block";
      }
    });

    // Save address when user types
    addressInput.addEventListener("blur", () => {
      if (addressInput.value.trim() !== "") {
        localStorage.setItem(SAVED_ADDRESS_KEY, addressInput.value.trim());
      }
    });

    // Change address
    changeBtn.addEventListener("click", () => {
      addressInput.style.display = "block";
      savedBox.style.display = "none";
      addressInput.focus();
    });
  </script> -->


  <script src="js/cart.js"></script>
</body>

</html>
