<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auroo - Search Results</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/order.css">
    <link rel="stylesheet" href="css/media.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        form {
            width: 80vw;
            margin: auto;
        }


        .details-cart {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }


        .cart-btn {
            text-decoration: none;
            margin-left: 12px;
        }
    </style>
</head>

<body>

    <header class="header">
        <nav class="nav-bar">
            <div class="navbar-primery">
                <!-- <img src="imgs\mamaearth-logo.avif" alt="logo-me" width="140px" height="31.5px"> -->
                <a href="index.html">
                    <div class="logo exile-regular">
                        <span style="color: #ff9900; font-size: 2em; font-weight: 900;">AUR</span>
                        <span style="color: #4CAF50; font-size: 2em; font-weight: 900;">OO</span>
                    </div>
                </a>

                <form action="search.html" method="GET" class="sec search-box">
                    <!-- <input type="text" name="q" class="search-bar" placeholder="Search items..." required />
          <button type="submit" class="search-btn"><i class="fa-solid fa-magnifying-glass"></i>
          </button> -->
                </form>




                <!-- ðŸ›’ -->
                <a href="cart.html" class="cart-link cart-btn">
                    <div class="cart-button" disabled>
                        <div class="cart-icon"><i class="fa-solid fa-cart-shopping"></i></div>
                        <div class="cart-text">My Cart</div>
                    </div>
                </a>

                <a href="order.html" class="cart-link cart-btn">
                    <div class="cart-button" disabled>
                        <div class="cart-icon"><i class="fa-solid fa-truck-ramp-box"></i></div>
                        <div class="cart-text">Quick Order</div>
                    </div>
                </a>

            </div>

        </nav>
    </header>
    <div class="space" style="margin-top: 80px;"></div>


    <section class="container">
        <div class="heading-form">
            <h2>Quick Grocery Order</h2>
        </div>
        <!-- <p class="note">Write your items one per line</p> -->
        <div class="quick-form">
            <form action="https://api.web3forms.com/submit" method="POST">

                <!-- Web3Forms Key -->
                <input type="hidden" name="access_key" value="d2b23d01-9c50-4410-9907-7f3054c47b84">



                <!-- USER DETAILS -->
                <h3>Delivery Details</h3>
                <div class="details-cart">
                    <div id="detailsSummary" style="display:none; margin-bottom:12px;">
                        <h4>Saved Details</h4>
                        <ul id="summaryList"></ul>
                    </div>

                    <button type="button" id="editToggleBtn" class="btn">
                        Edit Details
                    </button>
                </div>
                <!-- <input type="text" name="Name" placeholder="Your Name" required>
    <input type="tel" name="Mobile Number" placeholder="Mobile Number" required> -->
                <input type="text" name="Name" placeholder="Your Name" required data-save>

                <input type="tel" name="Mobile Number" placeholder="Mobile Number" required data-save>

                <select name="Location Type" required data-save>
                    <option value="">Nearby-location</option>
                    <option>main bus-stand</option>
                    <option>Near parshuram chouk</option>
                    <option>Nala ki dhani</option>
                    <option>Baajar</option>
                    <option>Rohida</option>
                    <option>Gurjaro ki dhani</option>
                    <option>other</option>
                </select>

                <input type="search" name="Location" placeholder="Full Address / Landmark" required data-save>

                <!-- <textarea  name="Address" placeholder="Full Address / Landmark" required></textarea> -->

                <!-- SINGLE TODO-LIST FIELD -->
                <h2>Your Grocery List</h2>

                <textarea name="Grocery List" class="list-field" placeholder="Example:
Rice 2 kg
Sugar 1 kg
Oil 1 litre
Biscuit 2 packet" required></textarea>

                <p class="hint">
                    â€¢ Write one item per line<br>
                    â€¢ Any brand is okay<br>
                    â€¢ We will call to confirm <br>
                    â€¢ Only cash on delivery
                </p>

                <button type="submit">Send Order</button>

            </form>
        </div>
    </section>



    <script>
        const editableFields = document.querySelectorAll("[data-save]");
        const toggleBtn = document.getElementById("editToggleBtn");

        let isEditing = false;

        // Lock fields by default if data exists
        function lockFields() {
            editableFields.forEach(field => {
                if (localStorage.getItem("auroo_" + field.name)) {
                    field.setAttribute("readonly", true);
                    field.style.opacity = "0.6";
                }
            });
        }

        function unlockFields() {
            editableFields.forEach(field => {
                field.removeAttribute("readonly");
                field.style.opacity = "1";
            });
        }

        window.addEventListener("DOMContentLoaded", () => {
            lockFields();
        });

        toggleBtn.addEventListener("click", () => {
            isEditing = !isEditing;

            if (isEditing) {
                unlockFields();
                toggleBtn.textContent = "Save Details";
            } else {
                lockFields();
                toggleBtn.textContent = "Edit Details";
            }
        });
    </script>

    <script>
        document.querySelectorAll("select[data-save]").forEach(select => {
            select.addEventListener("mousedown", e => {
                if (select.hasAttribute("data-locked")) {
                    e.preventDefault();
                }
            });
        });

        function lockFields() {
            editableFields.forEach(field => {
                if (localStorage.getItem("auroo_" + field.name)) {
                    if (field.tagName === "SELECT") {
                        field.setAttribute("data-locked", "true");
                        field.style.pointerEvents = "none";
                    } else {
                        field.setAttribute("readonly", true);
                    }
                    field.style.opacity = "0.6";
                }
            });
        }

        function unlockFields() {
            editableFields.forEach(field => {
                field.removeAttribute("readonly");
                field.removeAttribute("data-locked");
                field.style.pointerEvents = "auto";
                field.style.opacity = "1";
            });
        }
    </script>

    <script>
        const SAVE_PREFIX = "auroo_";

        // Load saved data
        document.querySelectorAll("[data-save]").forEach(field => {
            const key = SAVE_PREFIX + field.name;
            const savedValue = localStorage.getItem(key);

            if (savedValue) {
                field.value = savedValue;
            }

            // Save on change
            field.addEventListener("input", () => {
                localStorage.setItem(key, field.value);
            });
        });
    </script>

    <script>
        (function () {
            const fields = document.querySelectorAll("[data-save]");
            const editBtn = document.getElementById("editToggleBtn");
            const form = document.getElementById("orderForm");

            let editing = false;

            function hideFields() {
                fields.forEach(field => {
                    if (localStorage.getItem("auroo_" + field.name)) {
                        field.style.display = "none";
                    }
                });
            }

            function showFields() {
                fields.forEach(field => {
                    field.style.display = "block";
                });
            }

            function lockFields() {
                fields.forEach(field => {
                    if (field.tagName === "SELECT") {
                        field.style.pointerEvents = "none";
                    } else {
                        field.setAttribute("readonly", true);
                    }
                });
            }

            function unlockFields() {
                fields.forEach(field => {
                    field.removeAttribute("readonly");
                    field.style.pointerEvents = "auto";
                });
            }

            window.addEventListener("DOMContentLoaded", () => {
                hideFields();
                lockFields();
            });

            editBtn.addEventListener("click", () => {
                editing = !editing;

                if (editing) {
                    showFields();
                    unlockFields();
                    editBtn.textContent = "Save Details";
                } else {
                    lockFields();
                    hideFields();
                    editBtn.textContent = "Edit Details";
                }
            });

            form.addEventListener("submit", () => {
                fields.forEach(field => {
                    localStorage.setItem("auroo_" + field.name, field.value);
                });

                lockFields();
                hideFields();
                editBtn.textContent = "Edit Details";
            });
        })();
    </script>


    <script>
        (function () {
            const fields = document.querySelectorAll("[data-save]");
            const summaryBox = document.getElementById("detailsSummary");
            const summaryList = document.getElementById("summaryList");
            const editBtn = document.getElementById("editToggleBtn");
            const form = document.getElementById("orderForm");

            function buildSummary() {
                summaryList.innerHTML = "";
                let hasData = false;

                fields.forEach(field => {
                    const key = "auroo_" + field.name;
                    const value = localStorage.getItem(key);

                    if (value) {
                        hasData = true;
                        const li = document.createElement("li");
                        li.textContent = `${field.name}: ${value}`;
                        summaryList.appendChild(li);
                    }
                });

                summaryBox.style.display = hasData ? "block" : "none";
            }

            // Save only if field is NOT empty
            fields.forEach(field => {
                field.addEventListener("input", () => {
                    const value = field.value.trim();
                    const key = "auroo_" + field.name;

                    if (value !== "") {
                        localStorage.setItem(key, value);
                        buildSummary();
                    }
                });
            });

            // On load
            window.addEventListener("DOMContentLoaded", buildSummary);

            // Hide summary while editing
            editBtn.addEventListener("click", () => {
                if (editBtn.textContent === "Save Details") {
                    summaryBox.style.display = "none";
                } else {
                    buildSummary();
                }
            });

            // After submit â†’ rebuild summary
            form.addEventListener("submit", () => {
                fields.forEach(field => {
                    const value = field.value.trim();
                    if (value !== "") {
                        localStorage.setItem("auroo_" + field.name, value);
                    }
                });
                buildSummary();
            });
        })();
    </script>


</body>

</html>